
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>BQP in PSPACE &#8212; Computing in Physics (Phy446)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'QC/BQPinPSPACE';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview" href="../Ising/Overview.html" />
    <link rel="prev" title="Gates for any Unitary" href="Universal.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../Overview.html">
  
  
  
  
  
  
    <p class="title logo__title">Computing in Physics (Phy446)</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Setting up</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Setup</a></li>






</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Cellular Automata</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../CellularAutomata/CellularAutomata.html">Cellular Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CellularAutomata/Sand.html">Sand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CellularAutomata/OtherAutomata.html">Other Interesting Automata</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Quantum Computing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="0-DiracNotation.html">Dirac Notation</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="1a-QuantumComputingSimulator.html">QC Simulators</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="SimulatorS.html">Simulator S</a></li>
<li class="toctree-l2"><a class="reference internal" href="1b-QuantumComputingSimulator.html">Simulator M-(abcd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Measuring.html">Measuring and Input</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="NonAtomicGates.html">Non-atomic gates</a></li>

<li class="toctree-l1"><a class="reference internal" href="PhaseEstimation.html">Phase estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="QFT.html">Quantum Fourier Transform</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Shor-Overview.html">Shor’s Algorithm</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Shor-Classical.html">Shor’s Algorithm (classically)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shor-Quantum.html">Quantum Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="ModularMultiplication.html">Modular Multiplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shor-QuantumCircuit.html">Shor’s Algorithm</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Quantum Computing (extensions)</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="Gates.html">Gates</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="ClassicalGates.html">Classical Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="ControlledGates.html">Controlled Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="Universal.html">Gates for any Unitary</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">BQP in PSPACE</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Ising Model</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Ising/Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ising/IsingModel.html">Simulating an Ising Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ising/Measure.html">Measuring the Ising Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ising/RG.html">The Renormalization Group</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Ising/SimulatedAnnealing.html">Extra Credit: Simulated Annealing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Ising/ProteinFolding.html">Protein Folding</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../Ising/ParallelTempering.html">Extra Credit: Parallel Tempering</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ML/Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ML/Hopfield.html">Hopfield Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ML/RBM.html">Restricted Boltzmann Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ML/Diffusion.html">Generative Diffusion Models</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Topological Insulators</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../TI/Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TI/Lattice.html">Lattices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TI/TightBinding.html">Tight Binding Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TI/ChernInsulators.html">Topological Insulators</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>BQP in PSPACE</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-amplitude-in-polynomial-space">An amplitude in Polynomial Space</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-it-together">Putting it together</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#measuring-in-polynomial-time">Measuring in Polynomial Time</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="bqp-in-pspace">
<h1>BQP in PSPACE<a class="headerlink" href="#bqp-in-pspace" title="Link to this heading">#</a></h1>
<div class="tip admonition">
<p class="admonition-title">Extra Credit</p>
<p>Everything on this page is extra credit worth <strong>20 points</strong>.</p>
</div>
<p>In this section, we are going to build Simulator 4. Our previous simulators were exponential in both time and space (RAM).  This simulator is going to be special because it is going to be (at least) exponential in time but it’s going to require only a polynomial amount of space.   In fact, it uses so little space that you’d be able to run very large calculations on your laptop as long as you’d be willing to wait a really long time for your result.</p>
<p>The class which can be solved with polynomial amount of space but arbitrary computation (i.e. your laptop with the same RAM but really really fast clock speed) is class PSPACE.</p>
<p>By building simulator 4 (and showing that it works in polynomial space) you will have demonstrated that BQP in PSPACE.</p>
<p>We need to start by taking some care with what we mean by running a quantum computation.  Previously, we’ve allowed our simulator to output the state vector (something a real quantum computer can’t do but we could).  But the state vector is already exponentially large so we can’t even print it out in polynomial time.   Instead, we will require this simulator to only work when MEASURE is applied.</p>
<p>We will worry about figuring out how to implement the measure later.  Let’s start by figuring out how to evaluate one amplitude - i.e. what’s the amplitude of <span class="math notranslate nohighlight">\(|101\rangle\)</span> - using only polynomial space.</p>
<section id="an-amplitude-in-polynomial-space">
<h2>An amplitude in Polynomial Space<a class="headerlink" href="#an-amplitude-in-polynomial-space" title="Link to this heading">#</a></h2>
<p>First notice that in Simulation II, the thing that is cost you RAM is that you are doubling your list length every time you do a Hadamard.  Nothing but the Hadamard is causing trouble.</p>
<p>To build this simulator, we will make the following changes.
Get rid of the AddDuplicates function in simulator II.  Notice that this uses more RAM so seems to be going backwards.</p>
<div class="caution admonition">
<p class="admonition-title">Grading</p>
<p>Go ahead and implement this code.  Verify that you still get the same answer that you previously did (i.e. the add duplicates function was an efficiency improvement but not important).</p>
</div>
<p>Currently, we are using a lot of RAM.  Now we are going to make a change to our simulation.  Our simulation (which we will use as a subroutine for a bigger simulation) is going to take (1) a quantum circuit (which has <span class="math notranslate nohighlight">\(k\)</span> Hadamards in it and (2) a binary number of length <span class="math notranslate nohighlight">\(k\)</span>.  For example, if we had four Hadamards, our simulator might take the number <span class="math notranslate nohighlight">\(1011\)</span>.  We will interpret this as only taking the “1” path of the first Hadamard, the “0” path of the second Hadamard, the “1” path of the third Hadamard and the “1” path of the fourth Hadamard.</p>
<p>Recall that your Hadamard function <code class="docutils literal notranslate"><span class="pre">Hadamard(input,wire)</span></code> takes <span class="math notranslate nohighlight">\(|i\rangle \rightarrow \frac{1}{\sqrt{2}}\left(|0\rangle + (-1)^i |1\rangle  \right)\)</span></p>
<div class="caution admonition">
<p class="admonition-title">Grading</p>
<p>Make a new Hadamard function <code class="docutils literal notranslate"><span class="pre">Hadamard(input,wire,s)</span></code> which takes <span class="math notranslate nohighlight">\(|i\rangle \rightarrow \frac{1}{\sqrt{2}}\left(|0\rangle + (-1)^i |1\rangle  \right)\)</span> and the bit <code class="docutils literal notranslate"><span class="pre">s</span></code> and returns the correct result.</p>
</div>
<p>Notice that when you run this new simulation it gives the wrong answer, but it doesn’t take very much RAM at all.  The only place you were previously consuming RAM was that your Hadamard gate was doubling the list length each time.  Now it’s not.</p>
<hr class="docutils" />
<section id="putting-it-together">
<h3>Putting it together<a class="headerlink" href="#putting-it-together" title="Link to this heading">#</a></h3>
<p>Currently we are using less RAM but getting the wrong answer.  Now, we want to go ahead and change things so we can get the correct answer and still not use much RAM.  Let’s say we are trying to figure out the amplitude for <span class="math notranslate nohighlight">\(|101\rangle\)</span>.  Let’s run our new simulation using all possible binary numbers (for the choices for our Hadamard).  Each one of those simulations is going to give us a value for the amplitude.  We should sum them all.  This is going to require an exponential number, <span class="math notranslate nohighlight">\(2^k\)</span>,  runs of our simulation but each one takes very little RAM (we will count carefully in a minute).</p>
<p>We now have an algorithm which gives us the amplitude for a particular binary number.</p>
<div class="caution admonition">
<p class="admonition-title">Grading</p>
<p>Go ahead and implement in your code.  Run a circuit of four Hadamards and compute the amplitude for <span class="math notranslate nohighlight">\(|101\rangle\)</span>. Check that you get the same result for that amplitude using Simulator II.</p>
</div>
</section>
</section>
<section id="measuring-in-polynomial-time">
<h2>Measuring in Polynomial Time<a class="headerlink" href="#measuring-in-polynomial-time" title="Link to this heading">#</a></h2>
<p>We now are able to get a particular amplitude in polynomial time.  As the next step, we’d like to be able to implement the MEASURE function.</p>
<p>Before you were probably applying MEASURE by using <code class="docutils literal notranslate"><span class="pre">np.choice</span></code> with the state vector.  We obviously can’t do that here since we can’t afford to write out the state vector.  We are going to need to think more carefully about how to perform a MEASURE without having the whole vector.</p>
<p>Essentially, we are going to invert things.  Let’s first choose a random number <span class="math notranslate nohighlight">\(r \in (0,1)\)</span>.  Then we are just going to enumerate over the different binary numbers <span class="math notranslate nohighlight">\(|i\rangle\)</span> computing the amplitude (and then the probability) for each one.  We can then subtract off the probability from our random number until we find the amplitude that makes it zero (be careful here about off-by-one errors).</p>
<div class="caution admonition">
<p class="admonition-title">Grading</p>
<p>Write code to successfully perform measure where you see one amplitude at a time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># do something (probably including pick a random number)</span>
<span class="k">for</span> <span class="n">amp</span> <span class="ow">in</span> <span class="n">stateVector</span><span class="p">:</span>
    <span class="c1"># you can do whatever you want here </span>
    <span class="c1"># except for store a lot of these amplitudes</span>
    <span class="c1"># return something </span>

</pre></div>
</div>
</div>
<hr class="docutils" />
<!-- Now we need to figure out how to get a specific amplitude.  Maybe the amplitude for the binary number $|01101\rangle$.  Once we've done this, then we can just loop over all the binary numbers and generate each of the amplitudes and use our MEASURE technique from above . --> <!-- 
To do this, we shoudl think about our Simulator II.  Remember we have three gates: H, CNOT, $P(\theta)$.  Two of these gates - CNOT and $P(\theta)$ - don't increase the amount of RAM That is being used at all.  On the other hand, the Hadamard gate doubles the amount of RAM that is being used.  Every binary number in your list, gets broken into two additional binary numbers. 

We are going to modify simulator 2 in various ways.

Suppose you have a list of length $l$ and apply the Hadamard to gate $i$.
After the application (before you combine duplicates), you are going to have a list of length $2l$ with $l$ binary numbers  

Typically after the application of a gate, you would apply a `AddDuplicates` function.  While this is important to decrease the total amount of RAM being used, we don't have to do this to get a correct answer.  This is because quantum mechanics is linear - i.e. if your list is `[(a,'001'), (b,'010'), (c,'001')]` or your list is 
`[(a+c,'001'),(b,'010')]` you will get the same answer at the end of the day.  *Convince yourself of this*.   



:::{admonition} Grading
:class: caution

Now, run your code on the following circuit with and without the `AddDuplicates` function.  Verify that it gives the same amplitude for every vector.

(circuit here)

:::

--><!-- 
This seems to be heading in the wrong direction.   We saw two Hadamards where we could have potentially added some duplicates and we didn't choose to leaving us using more RAM. 

Let's consider the list that's produced immediately after the Hadamard acts on site $i$. 
After the application of the Hadamard (before you combine duplicates), you then have $l$ binary numbers with a 0 on site $i$ and $l$ binary numbers with a 1 on site $i$.  Let's sort your list so that these two lists are separate. 


Currently our simulators take as input simply the circuit (and the input state).  Suppose we also take as input whether each Hadamard should leave either the "0" or "1" bit generate from each Hadamard.  For example, we could run our circuit above as `Simulator([1,0])`.  Then the first Hadamard should leave the "1" part of the list and the second Hadamard should be the "0" part of your list. We could do this by not using the `AddDuplicate` function and instead 
use the 
```
def RemoveBit(i, s)
```
function which removes all the binary numbers with the i'th bit being s (either 0 or 1).



Notice that this simulator is not going to increase the RAM.  After the `RemoveBit` each list is still the same length.  

But now we are definitely going to get the wrong answer for our amplitude of $|01101\rangle$.  But suppose we run it four times returning
```
Simulator4([0,0])['01101']+Simulator4([0,1])['01101']+Simulator4([1,0])['01101']+Simulator4([1,1])['01101']
```
This will give you the amplitude of $|01101\rangle$.  



:::{admonition} Grading
:class: caution

Write code that takes a circuit and gets the amplitude of $|01101\rangle$.  It's going to have to look at the number of Hadamards and some over all of them.  Verify that it gets the right answer for this amplitude using your simulator.

Show that you're not using much RAM by printing out the average length of your list. 

(circuit here)

:::
--><!--
:::{admonition} Grading
:class: caution

Put it all together and write a code that succesfully does the MEASURE.  The computational complexity is now exponential in the number of Hadamards which is painful.   

:::
--><!--
It almost looks like you are working in constant space - your list never gets bigger.  But you have to store which Hadamard bits you are going to use.  This bit-string is linear in the number of Hadamards and the number of Hadamards could be polynomial in the number of qubits.  

--></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./QC"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Universal.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Gates for any Unitary</p>
      </div>
    </a>
    <a class="right-next"
       href="../Ising/Overview.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Overview</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-amplitude-in-polynomial-space">An amplitude in Polynomial Space</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-it-together">Putting it together</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#measuring-in-polynomial-time">Measuring in Polynomial Time</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bryan Clark
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>